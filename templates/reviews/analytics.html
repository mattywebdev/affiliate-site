{% extends "base.html" %}
{% block content %}

<h1>Analytics</h1>

<form method="get" style="margin: 12px 0;">
  <label>Timeframe:</label>
  <select name="days">
    <option value="7" {% if days == 7 %}selected{% endif %}>Last 7 days</option>
    <option value="30" {% if days == 30 %}selected{% endif %}>Last 30 days</option>
    <option value="365" {% if days == 365 %}selected{% endif %}>Last 365 days</option>
  </select>
  <button type="submit">Apply</button>
</form>

<hr>

<h2>Top products (last {{ days }} days)</h2>

{% if top_products %}
  <ol>
    {% for p in top_products %}
      <li style="margin-bottom: 6px;">
        <a href="{% url 'reviews:product_detail' p.product__slug %}">
          {{ p.product__name }}
        </a>
        â€” <strong>{{ p.clicks }}</strong> clicks
      </li>
    {% endfor %}
  </ol>
{% else %}
  <p>No clicks in this timeframe.</p>
{% endif %}

<hr>

<h2>Clicks per day</h2>

{% if clicks_per_day %}
  <table border="1" cellpadding="6" style="border-collapse: collapse;">
    <tr>
      <th>Date</th>
      <th>Clicks</th>
    </tr>
    {% for row in clicks_per_day %}
      <tr>
        <td>{{ row.day }}</td>
        <td>{{ row.clicks }}</td>
      </tr>
    {% endfor %}
  </table>
{% else %}
  <p>No daily data.</p>
{% endif %}

{% endblock %}
