{% extends "base.html" %}
{% block content %}

<section class="hero" style="padding:28px; border:1px solid #eee; border-radius:18px; margin-bottom:22px;">
  <h1 style="margin:0 0 10px; font-size:40px; line-height:1.1;">
    Find the best gear ‚Äî fast.
  </h1>
  <p style="margin:0 0 16px; color:#555; font-size:16px; max-width:60ch;">
    Honest ratings, quick pros & cons, and curated articles. No fluff. Pick something, click buy, done.
  </p>

  <div style="display:flex; gap:12px; flex-wrap:wrap;">
    <a class="btn" href="{% url 'reviews:top_products' %}">üî• Top Picks</a>
    <a class="btn" href="{% url 'reviews:article_list' %}">üì∞ Browse Articles</a>
    <a class="btn" href="{% url 'reviews:product_list' %}">üõí Browse Products</a>
  </div>

  <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; color:#666; font-size:13px;">
    <span>‚úÖ Ratings</span>
    <span>‚úÖ Pros/Cons</span>
    <span>‚úÖ Click tracking</span>
    <span>‚úÖ SEO meta</span>
  </div>
</section>

<section style="margin-bottom:26px;">
  <h2 style="margin:0 0 10px;">üì∞ Latest articles</h2>
  <div style="display:grid; grid-template-columns:repeat(2, 1fr); gap:14px;">
    {% for a in latest_articles %}
      <div style="border:1px solid #eee; border-radius:16px; padding:14px;">
        <a href="{% url 'reviews:article_detail' a.slug %}" style="font-weight:800; font-size:16px;">
          {{ a.title }}
        </a>
        <div style="margin-top:6px; color:#666; font-size:13px;">
          {% if a.category %}
            <a href="{% url 'reviews:category_detail' a.category.slug %}">{{ a.category.name }}</a>
          {% endif %}
          ‚Ä¢ {{ a.created_at|date:"d M Y" }}
        </div>
        <p style="margin:8px 0 0; color:#444;">{{ a.excerpt|truncatechars:140 }}</p>
      </div>
    {% empty %}
      <p>No articles yet.</p>
    {% endfor %}
  </div>
</section>

<section style="margin-bottom:26px;">
  <h2 style="margin:0 0 10px;">‚≠ê Top rated</h2>
  <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:14px;">
    {% for p in top_rated %}
      <div style="border:1px solid #eee; border-radius:16px; padding:14px;">
        {% if p.image %}
          <a href="{% url 'reviews:product_detail' p.slug %}">
            <img src="{{ p.image.url }}" alt="{{ p.name }}" style="width:100%; height:150px; object-fit:cover; border-radius:12px;">
          </a>
        {% endif %}

        <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start; margin-top:10px;">
          <div>
            <a href="{% url 'reviews:product_detail' p.slug %}" style="font-weight:700; font-size:16px;">
              {{ p.name }}
            </a>
            <div style="font-size:13px; color:#666; margin-top:2px;">
              {% if p.category %}
                <a href="{% url 'reviews:category_detail' p.category.slug %}">{{ p.category.name }}</a>
              {% endif %}
            </div>
          </div>

          <div style="white-space:nowrap;">
            {% include "reviews/_stars.html" with rating=p.rating %}
          </div>
        </div>

        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:8px;">
          <strong>¬£{{ p.price }}</strong>
          <span style="font-size:12px; color:#666;">{{ p.clicks }} clicks</span>
        </div>

        <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
          <a class="btn" href="{% url 'reviews:affiliate_redirect' p.slug %}" target="_blank" rel="noopener">Buy ‚Üí</a>
          <a href="{% url 'reviews:product_detail' p.slug %}">Details</a>
        </div>
      </div>
    {% empty %}
      <p>No rated products yet.</p>
    {% endfor %}
  </div>
</section>

<section style="margin-bottom:26px;">
  <h2 style="margin:0 0 10px;">üî• Most clicked</h2>
  <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:14px;">
    {% for p in most_clicked %}
      <div style="border:1px solid #eee; border-radius:16px; padding:14px;">
        <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start;">
          <a href="{% url 'reviews:product_detail' p.slug %}" style="font-weight:700;">{{ p.name }}</a>
          <span style="font-size:12px; color:#666;">{{ p.clicks }} clicks</span>
        </div>

        <div style="margin-top:6px; display:flex; justify-content:space-between; align-items:center;">
          <div style="font-size:13px; color:#666;">
            {% if p.category %}
              <a href="{% url 'reviews:category_detail' p.category.slug %}">{{ p.category.name }}</a>
            {% endif %}
          </div>
          {% include "reviews/_stars.html" with rating=p.rating %}
        </div>

        <div style="margin-top:8px;"><strong>¬£{{ p.price }}</strong></div>

        <div style="display:flex; gap:10px; margin-top:10px;">
          <a class="btn" href="{% url 'reviews:affiliate_redirect' p.slug %}" target="_blank" rel="noopener">Buy ‚Üí</a>
          <a href="{% url 'reviews:product_detail' p.slug %}">Details</a>
        </div>
      </div>
    {% empty %}
      <p>No products yet.</p>
    {% endfor %}
  </div>
</section>



<section style="margin-bottom:10px;">
  <h2 style="margin:0 0 10px;">Browse by category</h2>
  <div style="display:flex; gap:10px; flex-wrap:wrap;">
    {% for c in all_categories %}
      <a class="btn" href="{% url 'reviews:category_detail' c.slug %}">{{ c.name }}</a>
    {% empty %}
      <p>No categories yet.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
